{"ast":null,"code":"var _jsxFileName = \"D:\\\\pdf demo\\\\frontend\\\\src\\\\pages\\\\PDFViewer.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport toast from 'react-hot-toast';\nimport { pdfAPI, highlightAPI } from '../services/api';\nimport { v4 as uuidv4 } from 'uuid';\n\n// Set up PDF.js worker - using a more reliable CDN\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\npdfjs.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\nconst PDFViewer = () => {\n  _s();\n  const {\n    uuid\n  } = useParams();\n  const [numPages, setNumPages] = useState(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [scale, setScale] = useState(1.0);\n  const [isSelecting, setIsSelecting] = useState(false);\n  const [highlights, setHighlights] = useState([]);\n  const [isCreatingHighlight, setIsCreatingHighlight] = useState(false);\n  const pageRef = useRef(null);\n  const queryClient = useQueryClient();\n\n  // Fetch PDF file as blob\n  const {\n    data: pdfBlob,\n    isLoading: pdfLoading,\n    error: pdfError\n  } = useQuery(['pdf', uuid], () => pdfAPI.get(uuid), {\n    select: response => new Blob([response.data], {\n      type: 'application/pdf'\n    }),\n    enabled: !!uuid,\n    retry: 2\n  });\n\n  // Fetch highlights for this PDF\n  const {\n    data: highlightsData\n  } = useQuery(['highlights', uuid], () => highlightAPI.getByPDF(uuid), {\n    enabled: !!uuid,\n    onSuccess: response => {\n      setHighlights(response.data.highlights || []);\n    },\n    onError: error => {\n      console.error('Failed to fetch highlights:', error);\n      toast.error('Failed to load highlights');\n    }\n  });\n\n  // Create highlight mutation\n  const createHighlightMutation = useMutation(highlightAPI.create, {\n    onSuccess: () => {\n      queryClient.invalidateQueries(['highlights', uuid]);\n      toast.success('Highlight created!');\n      setIsCreatingHighlight(false);\n    },\n    onError: error => {\n      var _error$response, _error$response$data;\n      console.error('Failed to create highlight:', error);\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Failed to create highlight');\n      setIsCreatingHighlight(false);\n    }\n  });\n\n  // Delete highlight mutation\n  const deleteHighlightMutation = useMutation(highlightAPI.delete, {\n    onSuccess: () => {\n      queryClient.invalidateQueries(['highlights', uuid]);\n      toast.success('Highlight deleted!');\n    },\n    onError: error => {\n      var _error$response2, _error$response2$data;\n      toast.error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'Failed to delete highlight');\n    }\n  });\n  const onDocumentLoadSuccess = ({\n    numPages\n  }) => {\n    setNumPages(numPages);\n    console.log('PDF loaded with', numPages, 'pages');\n  };\n\n  // Enhanced text selection handler\n  const handleTextSelection = useCallback(async () => {\n    if (!isSelecting || isCreatingHighlight) return;\n    const selection = window.getSelection();\n    if (!selection.rangeCount || !selection.toString().trim()) return;\n    setIsCreatingHighlight(true);\n    try {\n      var _pageRef$current;\n      const range = selection.getRangeAt(0);\n      const selectedText = selection.toString().trim();\n\n      // Get the page element\n      const pageElement = (_pageRef$current = pageRef.current) === null || _pageRef$current === void 0 ? void 0 : _pageRef$current.querySelector('.react-pdf__Page__canvas');\n      if (!pageElement) {\n        throw new Error('Page element not found');\n      }\n      const pageRect = pageElement.getBoundingClientRect();\n      const rangeRect = range.getBoundingClientRect();\n\n      // Calculate relative positions\n      const relativeRect = {\n        left: (rangeRect.left - pageRect.left) / pageRect.width,\n        top: (rangeRect.top - pageRect.top) / pageRect.height,\n        right: (rangeRect.right - pageRect.left) / pageRect.width,\n        bottom: (rangeRect.bottom - pageRect.top) / pageRect.height\n      };\n\n      // Validate coordinates\n      if (relativeRect.left < 0 || relativeRect.top < 0 || relativeRect.right > 1 || relativeRect.bottom > 1) {\n        throw new Error('Selection is outside page bounds');\n      }\n      const highlightData = {\n        pdfUuid: uuid,\n        pageNumber,\n        highlightedText: selectedText,\n        position: {\n          x: relativeRect.left,\n          y: relativeRect.top,\n          width: relativeRect.right - relativeRect.left,\n          height: relativeRect.bottom - relativeRect.top\n        },\n        boundingBox: {\n          left: relativeRect.left,\n          top: relativeRect.top,\n          right: relativeRect.right,\n          bottom: relativeRect.bottom\n        }\n      };\n      console.log('Creating highlight:', highlightData);\n      await createHighlightMutation.mutateAsync(highlightData);\n    } catch (error) {\n      console.error('Error creating highlight:', error);\n      toast.error('Failed to create highlight: ' + error.message);\n      setIsCreatingHighlight(false);\n    } finally {\n      // Clear selection\n      selection.removeAllRanges();\n    }\n  }, [isSelecting, pageNumber, uuid, createHighlightMutation, isCreatingHighlight]);\n\n  // Handle mouse up event for text selection\n  const handleMouseUp = useCallback(event => {\n    if (!isSelecting) return;\n\n    // Small delay to ensure selection is complete\n    setTimeout(() => {\n      const selection = window.getSelection();\n      if (selection.toString().trim()) {\n        handleTextSelection();\n      }\n    }, 50);\n  }, [isSelecting, handleTextSelection]);\n\n  // Add event listeners for text selection\n  useEffect(() => {\n    const pageElement = pageRef.current;\n    if (!pageElement) return;\n    if (isSelecting) {\n      pageElement.addEventListener('mouseup', handleMouseUp);\n      // Prevent default text selection styling\n      pageElement.style.userSelect = 'text';\n    } else {\n      pageElement.removeEventListener('mouseup', handleMouseUp);\n      pageElement.style.userSelect = 'none';\n    }\n    return () => {\n      if (pageElement) {\n        pageElement.removeEventListener('mouseup', handleMouseUp);\n      }\n    };\n  }, [isSelecting, handleMouseUp]);\n  const renderHighlights = () => {\n    const pageHighlights = highlights.filter(h => h.pageNumber === pageNumber);\n    return pageHighlights.map(highlight => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute cursor-pointer transition-opacity hover:opacity-60\",\n      style: {\n        left: `${highlight.boundingBox.left * 100}%`,\n        top: `${highlight.boundingBox.top * 100}%`,\n        width: `${(highlight.boundingBox.right - highlight.boundingBox.left) * 100}%`,\n        height: `${(highlight.boundingBox.bottom - highlight.boundingBox.top) * 100}%`,\n        backgroundColor: highlight.color || '#ffff00',\n        opacity: 0.4,\n        mixBlendMode: 'multiply',\n        border: '1px solid rgba(255, 255, 0, 0.6)',\n        borderRadius: '2px',\n        pointerEvents: 'auto',\n        zIndex: 10\n      },\n      onClick: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        if (window.confirm(`Delete highlight: \"${highlight.highlightedText}\"?`)) {\n          deleteHighlightMutation.mutate(highlight.uuid);\n        }\n      },\n      title: `\"${highlight.highlightedText}\" - Click to delete`\n    }, highlight.uuid, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this));\n  };\n  if (pdfLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ml-3 text-lg\",\n        children: \"Loading PDF...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this);\n  }\n  if (pdfError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-500 text-xl mb-4\",\n          children: \"Failed to load PDF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/dashboard\",\n          className: \"text-blue-600 hover:underline\",\n          children: \"Back to Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white border-b px-4 py-3 flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/dashboard\",\n          className: \"flex items-center text-gray-600 hover:text-gray-900\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-5 w-5 mr-1\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M15 19l-7-7 7-7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), \"Back to Library\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsSelecting(!isSelecting),\n          disabled: isCreatingHighlight,\n          className: `flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors disabled:opacity-50 ${isSelecting ? 'bg-yellow-100 text-yellow-800 border border-yellow-300' : 'bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-4 w-4 mr-2\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h4a1 1 0 110 2h-1v10a2 2 0 01-2 2H6a2 2 0 01-2-2V6H3a1 1 0 110-2h4zM6 6v10h12V6H6zm3 3h6v2H9V9z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), isCreatingHighlight ? 'Creating...' : isSelecting ? 'Highlighting On' : 'Enable Highlighting']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setScale(Math.max(0.5, scale - 0.1)),\n            className: \"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-4 w-4\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-gray-700 min-w-[60px] text-center\",\n            children: [Math.round(scale * 100), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setScale(Math.min(3.0, scale + 0.1)),\n            className: \"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-4 w-4\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM15 10h-3m0 0H9m3 0v3m0-3V7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this), numPages && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setPageNumber(Math.max(1, pageNumber - 1)),\n            disabled: pageNumber <= 1,\n            className: \"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-4 w-4\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M15 19l-7-7 7-7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-gray-700 min-w-[80px] text-center\",\n            children: [pageNumber, \" of \", numPages]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setPageNumber(Math.min(numPages, pageNumber + 1)),\n            disabled: pageNumber >= numPages,\n            className: \"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-4 w-4\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M9 5l7 7-7 7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-auto bg-gray-100 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          ref: pageRef,\n          children: pdfBlob && /*#__PURE__*/_jsxDEV(Document, {\n            file: pdfBlob,\n            onLoadSuccess: onDocumentLoadSuccess,\n            onLoadError: error => {\n              console.error('PDF load error:', error);\n              toast.error('Failed to load PDF');\n            },\n            className: \"shadow-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(Page, {\n                pageNumber: pageNumber,\n                scale: scale,\n                renderTextLayer: true,\n                renderAnnotationLayer: false,\n                onLoadSuccess: () => {\n                  console.log(`Page ${pageNumber} loaded successfully`);\n                },\n                onLoadError: error => {\n                  console.error(`Page ${pageNumber} load error:`, error);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-0 pointer-events-none\",\n                children: renderHighlights()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 7\n    }, this), isSelecting && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-yellow-50 border-t border-yellow-200 px-4 py-2\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-yellow-800\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Highlighting Mode:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }, this), \" Select text with your mouse to create highlights. Click on existing highlights to delete them.\", isCreatingHighlight && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ml-2 text-yellow-600\",\n          children: \"(Creating highlight...)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 9\n    }, this), process.env.NODE_ENV === 'development' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-100 border-t px-4 py-2 text-xs text-gray-600\",\n      children: [\"Highlights: \", highlights.length, \" | Page: \", pageNumber, \" | Scale: \", scale.toFixed(1)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, this);\n};\n_s(PDFViewer, \"q5EgX+Gbq8REeqrju3nrmBzE0aU=\", false, function () {\n  return [useParams, useQueryClient, useQuery, useQuery, useMutation, useMutation];\n});\n_c = PDFViewer;\nexport default PDFViewer;\nvar _c;\n$RefreshReg$(_c, \"PDFViewer\");","map":{"version":3,"names":["React","useState","useRef","useCallback","useEffect","useParams","Link","useQuery","useMutation","useQueryClient","Document","Page","pdfjs","toast","pdfAPI","highlightAPI","v4","uuidv4","jsxDEV","_jsxDEV","GlobalWorkerOptions","workerSrc","version","PDFViewer","_s","uuid","numPages","setNumPages","pageNumber","setPageNumber","scale","setScale","isSelecting","setIsSelecting","highlights","setHighlights","isCreatingHighlight","setIsCreatingHighlight","pageRef","queryClient","data","pdfBlob","isLoading","pdfLoading","error","pdfError","get","select","response","Blob","type","enabled","retry","highlightsData","getByPDF","onSuccess","onError","console","createHighlightMutation","create","invalidateQueries","success","_error$response","_error$response$data","deleteHighlightMutation","delete","_error$response2","_error$response2$data","onDocumentLoadSuccess","log","handleTextSelection","selection","window","getSelection","rangeCount","toString","trim","_pageRef$current","range","getRangeAt","selectedText","pageElement","current","querySelector","Error","pageRect","getBoundingClientRect","rangeRect","relativeRect","left","width","top","height","right","bottom","highlightData","pdfUuid","highlightedText","position","x","y","boundingBox","mutateAsync","message","removeAllRanges","handleMouseUp","event","setTimeout","addEventListener","style","userSelect","removeEventListener","renderHighlights","pageHighlights","filter","h","map","highlight","className","backgroundColor","color","opacity","mixBlendMode","border","borderRadius","pointerEvents","zIndex","onClick","e","stopPropagation","preventDefault","confirm","mutate","title","fileName","_jsxFileName","lineNumber","columnNumber","children","to","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","disabled","Math","max","round","min","ref","file","onLoadSuccess","onLoadError","renderTextLayer","renderAnnotationLayer","process","env","NODE_ENV","length","toFixed","_c","$RefreshReg$"],"sources":["D:/pdf demo/frontend/src/pages/PDFViewer.js"],"sourcesContent":["import React, { useState, useRef, useCallback, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { Document, Page, pdfjs } from 'react-pdf';\r\nimport toast from 'react-hot-toast';\r\nimport { pdfAPI, highlightAPI } from '../services/api';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n// Set up PDF.js worker - using a more reliable CDN\r\npdfjs.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\r\n\r\nconst PDFViewer = () => {\r\n  const { uuid } = useParams();\r\n  const [numPages, setNumPages] = useState(null);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [scale, setScale] = useState(1.0);\r\n  const [isSelecting, setIsSelecting] = useState(false);\r\n  const [highlights, setHighlights] = useState([]);\r\n  const [isCreatingHighlight, setIsCreatingHighlight] = useState(false);\r\n  const pageRef = useRef(null);\r\n  const queryClient = useQueryClient();\r\n\r\n  // Fetch PDF file as blob\r\n  const { data: pdfBlob, isLoading: pdfLoading, error: pdfError } = useQuery(\r\n    ['pdf', uuid],\r\n    () => pdfAPI.get(uuid),\r\n    {\r\n      select: (response) => new Blob([response.data], { type: 'application/pdf' }),\r\n      enabled: !!uuid,\r\n      retry: 2,\r\n    }\r\n  );\r\n\r\n  // Fetch highlights for this PDF\r\n  const { data: highlightsData } = useQuery(\r\n    ['highlights', uuid],\r\n    () => highlightAPI.getByPDF(uuid),\r\n    {\r\n      enabled: !!uuid,\r\n      onSuccess: (response) => {\r\n        setHighlights(response.data.highlights || []);\r\n      },\r\n      onError: (error) => {\r\n        console.error('Failed to fetch highlights:', error);\r\n        toast.error('Failed to load highlights');\r\n      },\r\n    }\r\n  );\r\n\r\n  // Create highlight mutation\r\n  const createHighlightMutation = useMutation(highlightAPI.create, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['highlights', uuid]);\r\n      toast.success('Highlight created!');\r\n      setIsCreatingHighlight(false);\r\n    },\r\n    onError: (error) => {\r\n      console.error('Failed to create highlight:', error);\r\n      toast.error(error.response?.data?.error || 'Failed to create highlight');\r\n      setIsCreatingHighlight(false);\r\n    },\r\n  });\r\n\r\n  // Delete highlight mutation\r\n  const deleteHighlightMutation = useMutation(highlightAPI.delete, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['highlights', uuid]);\r\n      toast.success('Highlight deleted!');\r\n    },\r\n    onError: (error) => {\r\n      toast.error(error.response?.data?.error || 'Failed to delete highlight');\r\n    },\r\n  });\r\n\r\n  const onDocumentLoadSuccess = ({ numPages }) => {\r\n    setNumPages(numPages);\r\n    console.log('PDF loaded with', numPages, 'pages');\r\n  };\r\n\r\n  // Enhanced text selection handler\r\n  const handleTextSelection = useCallback(async () => {\r\n    if (!isSelecting || isCreatingHighlight) return;\r\n\r\n    const selection = window.getSelection();\r\n    if (!selection.rangeCount || !selection.toString().trim()) return;\r\n\r\n    setIsCreatingHighlight(true);\r\n\r\n    try {\r\n      const range = selection.getRangeAt(0);\r\n      const selectedText = selection.toString().trim();\r\n      \r\n      // Get the page element\r\n      const pageElement = pageRef.current?.querySelector('.react-pdf__Page__canvas');\r\n      if (!pageElement) {\r\n        throw new Error('Page element not found');\r\n      }\r\n\r\n      const pageRect = pageElement.getBoundingClientRect();\r\n      const rangeRect = range.getBoundingClientRect();\r\n\r\n      // Calculate relative positions\r\n      const relativeRect = {\r\n        left: (rangeRect.left - pageRect.left) / pageRect.width,\r\n        top: (rangeRect.top - pageRect.top) / pageRect.height,\r\n        right: (rangeRect.right - pageRect.left) / pageRect.width,\r\n        bottom: (rangeRect.bottom - pageRect.top) / pageRect.height,\r\n      };\r\n\r\n      // Validate coordinates\r\n      if (relativeRect.left < 0 || relativeRect.top < 0 || \r\n          relativeRect.right > 1 || relativeRect.bottom > 1) {\r\n        throw new Error('Selection is outside page bounds');\r\n      }\r\n\r\n      const highlightData = {\r\n        pdfUuid: uuid,\r\n        pageNumber,\r\n        highlightedText: selectedText,\r\n        position: {\r\n          x: relativeRect.left,\r\n          y: relativeRect.top,\r\n          width: relativeRect.right - relativeRect.left,\r\n          height: relativeRect.bottom - relativeRect.top,\r\n        },\r\n        boundingBox: {\r\n          left: relativeRect.left,\r\n          top: relativeRect.top,\r\n          right: relativeRect.right,\r\n          bottom: relativeRect.bottom,\r\n        },\r\n      };\r\n\r\n      console.log('Creating highlight:', highlightData);\r\n      await createHighlightMutation.mutateAsync(highlightData);\r\n      \r\n    } catch (error) {\r\n      console.error('Error creating highlight:', error);\r\n      toast.error('Failed to create highlight: ' + error.message);\r\n      setIsCreatingHighlight(false);\r\n    } finally {\r\n      // Clear selection\r\n      selection.removeAllRanges();\r\n    }\r\n  }, [isSelecting, pageNumber, uuid, createHighlightMutation, isCreatingHighlight]);\r\n\r\n  // Handle mouse up event for text selection\r\n  const handleMouseUp = useCallback((event) => {\r\n    if (!isSelecting) return;\r\n    \r\n    // Small delay to ensure selection is complete\r\n    setTimeout(() => {\r\n      const selection = window.getSelection();\r\n      if (selection.toString().trim()) {\r\n        handleTextSelection();\r\n      }\r\n    }, 50);\r\n  }, [isSelecting, handleTextSelection]);\r\n\r\n  // Add event listeners for text selection\r\n  useEffect(() => {\r\n    const pageElement = pageRef.current;\r\n    if (!pageElement) return;\r\n\r\n    if (isSelecting) {\r\n      pageElement.addEventListener('mouseup', handleMouseUp);\r\n      // Prevent default text selection styling\r\n      pageElement.style.userSelect = 'text';\r\n    } else {\r\n      pageElement.removeEventListener('mouseup', handleMouseUp);\r\n      pageElement.style.userSelect = 'none';\r\n    }\r\n\r\n    return () => {\r\n      if (pageElement) {\r\n        pageElement.removeEventListener('mouseup', handleMouseUp);\r\n      }\r\n    };\r\n  }, [isSelecting, handleMouseUp]);\r\n\r\n  const renderHighlights = () => {\r\n    const pageHighlights = highlights.filter(h => h.pageNumber === pageNumber);\r\n    \r\n    return pageHighlights.map((highlight) => (\r\n      <div\r\n        key={highlight.uuid}\r\n        className=\"absolute cursor-pointer transition-opacity hover:opacity-60\"\r\n        style={{\r\n          left: `${highlight.boundingBox.left * 100}%`,\r\n          top: `${highlight.boundingBox.top * 100}%`,\r\n          width: `${(highlight.boundingBox.right - highlight.boundingBox.left) * 100}%`,\r\n          height: `${(highlight.boundingBox.bottom - highlight.boundingBox.top) * 100}%`,\r\n          backgroundColor: highlight.color || '#ffff00',\r\n          opacity: 0.4,\r\n          mixBlendMode: 'multiply',\r\n          border: '1px solid rgba(255, 255, 0, 0.6)',\r\n          borderRadius: '2px',\r\n          pointerEvents: 'auto',\r\n          zIndex: 10,\r\n        }}\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n          e.preventDefault();\r\n          if (window.confirm(`Delete highlight: \"${highlight.highlightedText}\"?`)) {\r\n            deleteHighlightMutation.mutate(highlight.uuid);\r\n          }\r\n        }}\r\n        title={`\"${highlight.highlightedText}\" - Click to delete`}\r\n      />\r\n    ));\r\n  };\r\n\r\n  if (pdfLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n        <span className=\"ml-3 text-lg\">Loading PDF...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (pdfError) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-red-500 text-xl mb-4\">Failed to load PDF</div>\r\n          <Link to=\"/dashboard\" className=\"text-blue-600 hover:underline\">\r\n            Back to Dashboard\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen\">\r\n      {/* Header */}\r\n      <div className=\"bg-white border-b px-4 py-3 flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <Link\r\n            to=\"/dashboard\"\r\n            className=\"flex items-center text-gray-600 hover:text-gray-900\"\r\n          >\r\n            <svg className=\"h-5 w-5 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n            Back to Library\r\n          </Link>\r\n        </div>\r\n\r\n        {/* Controls */}\r\n        <div className=\"flex items-center space-x-4\">\r\n          {/* Highlight Toggle */}\r\n          <button\r\n            onClick={() => setIsSelecting(!isSelecting)}\r\n            disabled={isCreatingHighlight}\r\n            className={`flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors disabled:opacity-50 ${\r\n              isSelecting\r\n                ? 'bg-yellow-100 text-yellow-800 border border-yellow-300'\r\n                : 'bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200'\r\n            }`}\r\n          >\r\n            <svg className=\"h-4 w-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h4a1 1 0 110 2h-1v10a2 2 0 01-2 2H6a2 2 0 01-2-2V6H3a1 1 0 110-2h4zM6 6v10h12V6H6zm3 3h6v2H9V9z\" />\r\n            </svg>\r\n            {isCreatingHighlight ? 'Creating...' : (isSelecting ? 'Highlighting On' : 'Enable Highlighting')}\r\n          </button>\r\n\r\n          {/* Zoom Controls */}\r\n          <div className=\"flex items-center space-x-2\">\r\n            <button\r\n              onClick={() => setScale(Math.max(0.5, scale - 0.1))}\r\n              className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded\"\r\n            >\r\n              <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7\" />\r\n              </svg>\r\n            </button>\r\n            <span className=\"text-sm text-gray-700 min-w-[60px] text-center\">\r\n              {Math.round(scale * 100)}%\r\n            </span>\r\n            <button\r\n              onClick={() => setScale(Math.min(3.0, scale + 0.1))}\r\n              className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded\"\r\n            >\r\n              <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM15 10h-3m0 0H9m3 0v3m0-3V7\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Page Navigation */}\r\n          {numPages && (\r\n            <div className=\"flex items-center space-x-2\">\r\n              <button\r\n                onClick={() => setPageNumber(Math.max(1, pageNumber - 1))}\r\n                disabled={pageNumber <= 1}\r\n                className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n                </svg>\r\n              </button>\r\n              <span className=\"text-sm text-gray-700 min-w-[80px] text-center\">\r\n                {pageNumber} of {numPages}\r\n              </span>\r\n              <button\r\n                onClick={() => setPageNumber(Math.min(numPages, pageNumber + 1))}\r\n                disabled={pageNumber >= numPages}\r\n                className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* PDF Viewer */}\r\n      <div className=\"flex-1 overflow-auto bg-gray-100 p-4\">\r\n        <div className=\"flex justify-center\">\r\n          <div className=\"relative\" ref={pageRef}>\r\n            {pdfBlob && (\r\n              <Document\r\n                file={pdfBlob}\r\n                onLoadSuccess={onDocumentLoadSuccess}\r\n                onLoadError={(error) => {\r\n                  console.error('PDF load error:', error);\r\n                  toast.error('Failed to load PDF');\r\n                }}\r\n                className=\"shadow-lg\"\r\n              >\r\n                <div className=\"relative\">\r\n                  <Page\r\n                    pageNumber={pageNumber}\r\n                    scale={scale}\r\n                    renderTextLayer={true}\r\n                    renderAnnotationLayer={false}\r\n                    onLoadSuccess={() => {\r\n                      console.log(`Page ${pageNumber} loaded successfully`);\r\n                    }}\r\n                    onLoadError={(error) => {\r\n                      console.error(`Page ${pageNumber} load error:`, error);\r\n                    }}\r\n                  />\r\n                  {/* Highlight overlay */}\r\n                  <div className=\"absolute inset-0 pointer-events-none\">\r\n                    {renderHighlights()}\r\n                  </div>\r\n                </div>\r\n              </Document>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Instructions */}\r\n      {isSelecting && (\r\n        <div className=\"bg-yellow-50 border-t border-yellow-200 px-4 py-2\">\r\n          <p className=\"text-sm text-yellow-800\">\r\n            <strong>Highlighting Mode:</strong> Select text with your mouse to create highlights. \r\n            Click on existing highlights to delete them.\r\n            {isCreatingHighlight && <span className=\"ml-2 text-yellow-600\">(Creating highlight...)</span>}\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Debug info */}\r\n      {process.env.NODE_ENV === 'development' && (\r\n        <div className=\"bg-gray-100 border-t px-4 py-2 text-xs text-gray-600\">\r\n          Highlights: {highlights.length} | Page: {pageNumber} | Scale: {scale.toFixed(1)}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PDFViewer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}