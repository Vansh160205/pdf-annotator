{"ast":null,"code":"var _jsxFileName = \"D:\\\\pdf demo\\\\frontend\\\\src\\\\components\\\\DrawingTools.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { useMutation, useQueryClient } from 'react-query';\nimport { drawingAPI } from '../services/api';\nimport { Pen, ArrowRight, Square, Circle, Minus, Palette, X } from 'lucide-react';\nimport { v4 as uuidv4 } from 'uuid';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DrawingTools = ({\n  pdfUuid,\n  pageNumber,\n  scale,\n  isEnabled,\n  onDrawingChange,\n  pageContainerRef\n}) => {\n  _s();\n  const [tool, setTool] = useState('freehand');\n  const [color, setColor] = useState('#ff0000');\n  const [strokeWidth, setStrokeWidth] = useState(2);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [currentPath, setCurrentPath] = useState([]);\n  const [showTools, setShowTools] = useState(true);\n  const svgRef = useRef(null);\n  const queryClient = useQueryClient();\n  const createDrawingMutation = useMutation(drawingAPI.create, {\n    onSuccess: () => {\n      queryClient.invalidateQueries(['drawings', pdfUuid]);\n      toast.success('Drawing saved!');\n    },\n    onError: error => {\n      toast.error('Failed to save drawing');\n      console.error('Failed to save drawing:', error);\n    }\n  });\n  const tools = [{\n    id: 'freehand',\n    icon: Pen,\n    name: 'Freehand'\n  }, {\n    id: 'arrow',\n    icon: ArrowRight,\n    name: 'Arrow'\n  }, {\n    id: 'rectangle',\n    icon: Square,\n    name: 'Rectangle'\n  }, {\n    id: 'circle',\n    icon: Circle,\n    name: 'Circle'\n  }, {\n    id: 'line',\n    icon: Minus,\n    name: 'Line'\n  }];\n  const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#000000'];\n  const getRelativePosition = useCallback(e => {\n    if (!(pageContainerRef !== null && pageContainerRef !== void 0 && pageContainerRef.current)) return {\n      x: 0,\n      y: 0\n    };\n    const pageContainer = pageContainerRef.current;\n    const canvas = pageContainer.querySelector('canvas');\n    if (!canvas) return {\n      x: 0,\n      y: 0\n    };\n    const rect = canvas.getBoundingClientRect();\n    return {\n      x: (e.clientX - rect.left) / rect.width,\n      y: (e.clientY - rect.top) / rect.height\n    };\n  }, [pageContainerRef]);\n  const handleMouseDown = useCallback(e => {\n    if (!isEnabled) return;\n    e.preventDefault();\n    setIsDrawing(true);\n    const pos = getRelativePosition(e);\n    setCurrentPath([pos]);\n  }, [isEnabled, getRelativePosition]);\n  const handleMouseMove = useCallback(e => {\n    if (!isDrawing || !isEnabled) return;\n    e.preventDefault();\n    const pos = getRelativePosition(e);\n    if (tool === 'freehand') {\n      setCurrentPath(prev => [...prev, pos]);\n    } else {\n      setCurrentPath(prev => [prev[0], pos]);\n    }\n  }, [isDrawing, isEnabled, tool, getRelativePosition]);\n  const handleMouseUp = useCallback(async e => {\n    if (!isDrawing || currentPath.length === 0) return;\n    e.preventDefault();\n    const drawingData = {\n      uuid: uuidv4(),\n      pdfUuid,\n      pageNumber,\n      type: tool,\n      data: {\n        path: currentPath,\n        scale\n      },\n      style: {\n        color,\n        strokeWidth,\n        opacity: 1\n      }\n    };\n    try {\n      await createDrawingMutation.mutateAsync(drawingData);\n      onDrawingChange && onDrawingChange(drawingData);\n    } catch (error) {\n      console.error('Failed to save drawing:', error);\n    }\n    setIsDrawing(false);\n    setCurrentPath([]);\n  }, [isDrawing, currentPath, tool, pdfUuid, pageNumber, scale, color, strokeWidth, createDrawingMutation, onDrawingChange]);\n\n  // Add event listeners to the page container\n  useEffect(() => {\n    if (!isEnabled || !(pageContainerRef !== null && pageContainerRef !== void 0 && pageContainerRef.current)) return;\n    const pageContainer = pageContainerRef.current;\n    const canvas = pageContainer.querySelector('canvas');\n    if (!canvas) return;\n    canvas.addEventListener('mousedown', handleMouseDown);\n    canvas.addEventListener('mousemove', handleMouseMove);\n    canvas.addEventListener('mouseup', handleMouseUp);\n    canvas.style.cursor = 'crosshair';\n    return () => {\n      canvas.removeEventListener('mousedown', handleMouseDown);\n      canvas.removeEventListener('mousemove', handleMouseMove);\n      canvas.removeEventListener('mouseup', handleMouseUp);\n      canvas.style.cursor = 'default';\n    };\n  }, [isEnabled, handleMouseDown, handleMouseMove, handleMouseUp, pageContainerRef]);\n  const renderCurrentDrawing = () => {\n    if (currentPath.length === 0 || !(pageContainerRef !== null && pageContainerRef !== void 0 && pageContainerRef.current)) return null;\n    const pageContainer = pageContainerRef.current;\n    const canvas = pageContainer.querySelector('canvas');\n    if (!canvas) return null;\n    const rect = canvas.getBoundingClientRect();\n    switch (tool) {\n      case 'freehand':\n        if (currentPath.length < 2) return null;\n        const pathData = `M ${currentPath[0].x * rect.width} ${currentPath[0].y * rect.height} ` + currentPath.slice(1).map(p => `L ${p.x * rect.width} ${p.y * rect.height}`).join(' ');\n        return /*#__PURE__*/_jsxDEV(\"path\", {\n          d: pathData,\n          stroke: color,\n          strokeWidth: strokeWidth,\n          fill: \"none\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this);\n      case 'line':\n        if (currentPath.length < 2) return null;\n        return /*#__PURE__*/_jsxDEV(\"line\", {\n          x1: currentPath[0].x * rect.width,\n          y1: currentPath[0].y * rect.height,\n          x2: currentPath[1].x * rect.width,\n          y2: currentPath[1].y * rect.height,\n          stroke: color,\n          strokeWidth: strokeWidth\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this);\n      case 'rectangle':\n        if (currentPath.length < 2) return null;\n        const rectData = {\n          x: Math.min(currentPath[0].x, currentPath[1].x) * rect.width,\n          y: Math.min(currentPath[0].y, currentPath[1].y) * rect.height,\n          width: Math.abs(currentPath[1].x - currentPath[0].x) * rect.width,\n          height: Math.abs(currentPath[1].y - currentPath[0].y) * rect.height\n        };\n        return /*#__PURE__*/_jsxDEV(\"rect\", {\n          x: rectData.x,\n          y: rectData.y,\n          width: rectData.width,\n          height: rectData.height,\n          stroke: color,\n          strokeWidth: strokeWidth,\n          fill: \"none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this);\n      case 'circle':\n        if (currentPath.length < 2) return null;\n        const radius = Math.sqrt(Math.pow((currentPath[1].x - currentPath[0].x) * rect.width, 2) + Math.pow((currentPath[1].y - currentPath[0].y) * rect.height, 2));\n        return /*#__PURE__*/_jsxDEV(\"circle\", {\n          cx: currentPath[0].x * rect.width,\n          cy: currentPath[0].y * rect.height,\n          r: radius,\n          stroke: color,\n          strokeWidth: strokeWidth,\n          fill: \"none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this);\n      case 'arrow':\n        if (currentPath.length < 2) return null;\n        const start = currentPath[0];\n        const end = currentPath[1];\n        const angle = Math.atan2((end.y - start.y) * rect.height, (end.x - start.x) * rect.width);\n        const arrowLength = 10;\n        const arrowAngle = Math.PI / 6;\n        return /*#__PURE__*/_jsxDEV(\"g\", {\n          children: [/*#__PURE__*/_jsxDEV(\"line\", {\n            x1: start.x * rect.width,\n            y1: start.y * rect.height,\n            x2: end.x * rect.width,\n            y2: end.y * rect.height,\n            stroke: color,\n            strokeWidth: strokeWidth\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: `M ${end.x * rect.width} ${end.y * rect.height} \n                  L ${end.x * rect.width - arrowLength * Math.cos(angle - arrowAngle)} ${end.y * rect.height - arrowLength * Math.sin(angle - arrowAngle)}\n                  M ${end.x * rect.width} ${end.y * rect.height}\n                  L ${end.x * rect.width - arrowLength * Math.cos(angle + arrowAngle)} ${end.y * rect.height - arrowLength * Math.sin(angle + arrowAngle)}`,\n            stroke: color,\n            strokeWidth: strokeWidth,\n            fill: \"none\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this);\n      default:\n        return null;\n    }\n  };\n  if (!isEnabled) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `fixed left-4 top-1/2 transform -translate-y-1/2 bg-white rounded-lg shadow-lg p-4 z-40 transition-transform ${showTools ? '' : '-translate-x-full'}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-medium\",\n            children: \"Drawing Tools\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowTools(false),\n            className: \"p-1 hover:bg-gray-100 rounded\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-xs font-medium text-gray-600\",\n            children: \"Tools\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-2\",\n            children: tools.map(toolItem => {\n              const Icon = toolItem.icon;\n              return /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setTool(toolItem.id),\n                className: `p-2 rounded border flex items-center justify-center ${tool === toolItem.id ? 'bg-blue-100 border-blue-500 text-blue-700' : 'border-gray-300 hover:bg-gray-50'}`,\n                title: toolItem.name,\n                children: /*#__PURE__*/_jsxDEV(Icon, {\n                  className: \"h-4 w-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 21\n                }, this)\n              }, toolItem.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-xs font-medium text-gray-600\",\n            children: \"Color\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap gap-1\",\n            children: colors.map(colorOption => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setColor(colorOption),\n              className: `w-6 h-6 rounded border-2 ${color === colorOption ? 'border-gray-800' : 'border-gray-300'}`,\n              style: {\n                backgroundColor: colorOption\n              }\n            }, colorOption, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"color\",\n            value: color,\n            onChange: e => setColor(e.target.value),\n            className: \"w-full h-8 rounded border\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-xs font-medium text-gray-600\",\n            children: \"Stroke Width\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"1\",\n            max: \"10\",\n            value: strokeWidth,\n            onChange: e => setStrokeWidth(parseInt(e.target.value)),\n            className: \"w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-600\",\n            children: [strokeWidth, \"px\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), !showTools && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setShowTools(true),\n      className: \"fixed left-4 top-1/2 transform -translate-y-1/2 bg-white rounded-lg shadow-lg p-2 z-40\",\n      title: \"Show Drawing Tools\",\n      children: /*#__PURE__*/_jsxDEV(Palette, {\n        className: \"h-5 w-5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 9\n    }, this), isDrawing && (pageContainerRef === null || pageContainerRef === void 0 ? void 0 : pageContainerRef.current) && /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      className: \"absolute inset-0 pointer-events-none\",\n      style: {\n        width: '100%',\n        height: '100%',\n        zIndex: 30,\n        position: 'absolute',\n        top: 0,\n        left: 0\n      },\n      children: renderCurrentDrawing()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(DrawingTools, \"NQA/7OOAtOlzq8a5vfW2iVQJwPg=\", false, function () {\n  return [useQueryClient, useMutation];\n});\n_c = DrawingTools;\nexport default DrawingTools;\nvar _c;\n$RefreshReg$(_c, \"DrawingTools\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","useMutation","useQueryClient","drawingAPI","Pen","ArrowRight","Square","Circle","Minus","Palette","X","v4","uuidv4","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","DrawingTools","pdfUuid","pageNumber","scale","isEnabled","onDrawingChange","pageContainerRef","_s","tool","setTool","color","setColor","strokeWidth","setStrokeWidth","isDrawing","setIsDrawing","currentPath","setCurrentPath","showTools","setShowTools","svgRef","queryClient","createDrawingMutation","create","onSuccess","invalidateQueries","success","onError","error","console","tools","id","icon","name","colors","getRelativePosition","e","current","x","y","pageContainer","canvas","querySelector","rect","getBoundingClientRect","clientX","left","width","clientY","top","height","handleMouseDown","preventDefault","pos","handleMouseMove","prev","handleMouseUp","length","drawingData","uuid","type","data","path","style","opacity","mutateAsync","addEventListener","cursor","removeEventListener","renderCurrentDrawing","pathData","slice","map","p","join","d","stroke","fill","strokeLinecap","strokeLinejoin","fileName","_jsxFileName","lineNumber","columnNumber","x1","y1","x2","y2","rectData","Math","min","abs","radius","sqrt","pow","cx","cy","r","start","end","angle","atan2","arrowLength","arrowAngle","PI","children","cos","sin","className","onClick","toolItem","Icon","title","colorOption","backgroundColor","value","onChange","target","max","parseInt","ref","zIndex","position","_c","$RefreshReg$"],"sources":["D:/pdf demo/frontend/src/components/DrawingTools.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { drawingAPI } from '../services/api';\r\nimport { Pen, ArrowRight, Square, Circle, Minus, Palette, X } from 'lucide-react';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst DrawingTools = ({ pdfUuid, pageNumber, scale, isEnabled, onDrawingChange, pageContainerRef }) => {\r\n  const [tool, setTool] = useState('freehand');\r\n  const [color, setColor] = useState('#ff0000');\r\n  const [strokeWidth, setStrokeWidth] = useState(2);\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  const [currentPath, setCurrentPath] = useState([]);\r\n  const [showTools, setShowTools] = useState(true);\r\n  \r\n  const svgRef = useRef(null);\r\n  const queryClient = useQueryClient();\r\n\r\n  const createDrawingMutation = useMutation(drawingAPI.create, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['drawings', pdfUuid]);\r\n      toast.success('Drawing saved!');\r\n    },\r\n    onError: (error) => {\r\n      toast.error('Failed to save drawing');\r\n      console.error('Failed to save drawing:', error);\r\n    }\r\n  });\r\n\r\n  const tools = [\r\n    { id: 'freehand', icon: Pen, name: 'Freehand' },\r\n    { id: 'arrow', icon: ArrowRight, name: 'Arrow' },\r\n    { id: 'rectangle', icon: Square, name: 'Rectangle' },\r\n    { id: 'circle', icon: Circle, name: 'Circle' },\r\n    { id: 'line', icon: Minus, name: 'Line' }\r\n  ];\r\n\r\n  const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#000000'];\r\n\r\n  const getRelativePosition = useCallback((e) => {\r\n    if (!pageContainerRef?.current) return { x: 0, y: 0 };\r\n    \r\n    const pageContainer = pageContainerRef.current;\r\n    const canvas = pageContainer.querySelector('canvas');\r\n    if (!canvas) return { x: 0, y: 0 };\r\n    \r\n    const rect = canvas.getBoundingClientRect();\r\n    return {\r\n      x: (e.clientX - rect.left) / rect.width,\r\n      y: (e.clientY - rect.top) / rect.height\r\n    };\r\n  }, [pageContainerRef]);\r\n\r\n  const handleMouseDown = useCallback((e) => {\r\n    if (!isEnabled) return;\r\n    e.preventDefault();\r\n    \r\n    setIsDrawing(true);\r\n    const pos = getRelativePosition(e);\r\n    setCurrentPath([pos]);\r\n  }, [isEnabled, getRelativePosition]);\r\n\r\n  const handleMouseMove = useCallback((e) => {\r\n    if (!isDrawing || !isEnabled) return;\r\n    e.preventDefault();\r\n    \r\n    const pos = getRelativePosition(e);\r\n    \r\n    if (tool === 'freehand') {\r\n      setCurrentPath(prev => [...prev, pos]);\r\n    } else {\r\n      setCurrentPath(prev => [prev[0], pos]);\r\n    }\r\n  }, [isDrawing, isEnabled, tool, getRelativePosition]);\r\n\r\n  const handleMouseUp = useCallback(async (e) => {\r\n    if (!isDrawing || currentPath.length === 0) return;\r\n    e.preventDefault();\r\n    \r\n    const drawingData = {\r\n      uuid: uuidv4(),\r\n      pdfUuid,\r\n      pageNumber,\r\n      type: tool,\r\n      data: {\r\n        path: currentPath,\r\n        scale\r\n      },\r\n      style: {\r\n        color,\r\n        strokeWidth,\r\n        opacity: 1\r\n      }\r\n    };\r\n\r\n    try {\r\n      await createDrawingMutation.mutateAsync(drawingData);\r\n      onDrawingChange && onDrawingChange(drawingData);\r\n    } catch (error) {\r\n      console.error('Failed to save drawing:', error);\r\n    }\r\n\r\n    setIsDrawing(false);\r\n    setCurrentPath([]);\r\n  }, [isDrawing, currentPath, tool, pdfUuid, pageNumber, scale, color, strokeWidth, createDrawingMutation, onDrawingChange]);\r\n\r\n  // Add event listeners to the page container\r\n  useEffect(() => {\r\n    if (!isEnabled || !pageContainerRef?.current) return;\r\n\r\n    const pageContainer = pageContainerRef.current;\r\n    const canvas = pageContainer.querySelector('canvas');\r\n    if (!canvas) return;\r\n\r\n    canvas.addEventListener('mousedown', handleMouseDown);\r\n    canvas.addEventListener('mousemove', handleMouseMove);\r\n    canvas.addEventListener('mouseup', handleMouseUp);\r\n    canvas.style.cursor = 'crosshair';\r\n\r\n    return () => {\r\n      canvas.removeEventListener('mousedown', handleMouseDown);\r\n      canvas.removeEventListener('mousemove', handleMouseMove);\r\n      canvas.removeEventListener('mouseup', handleMouseUp);\r\n      canvas.style.cursor = 'default';\r\n    };\r\n  }, [isEnabled, handleMouseDown, handleMouseMove, handleMouseUp, pageContainerRef]);\r\n\r\n  const renderCurrentDrawing = () => {\r\n    if (currentPath.length === 0 || !pageContainerRef?.current) return null;\r\n\r\n    const pageContainer = pageContainerRef.current;\r\n    const canvas = pageContainer.querySelector('canvas');\r\n    if (!canvas) return null;\r\n\r\n    const rect = canvas.getBoundingClientRect();\r\n\r\n    switch (tool) {\r\n      case 'freehand':\r\n        if (currentPath.length < 2) return null;\r\n        const pathData = `M ${currentPath[0].x * rect.width} ${currentPath[0].y * rect.height} ` +\r\n          currentPath.slice(1).map(p => `L ${p.x * rect.width} ${p.y * rect.height}`).join(' ');\r\n        return (\r\n          <path\r\n            d={pathData}\r\n            stroke={color}\r\n            strokeWidth={strokeWidth}\r\n            fill=\"none\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n          />\r\n        );\r\n      \r\n      case 'line':\r\n        if (currentPath.length < 2) return null;\r\n        return (\r\n          <line\r\n            x1={currentPath[0].x * rect.width}\r\n            y1={currentPath[0].y * rect.height}\r\n            x2={currentPath[1].x * rect.width}\r\n            y2={currentPath[1].y * rect.height}\r\n            stroke={color}\r\n            strokeWidth={strokeWidth}\r\n          />\r\n        );\r\n      \r\n      case 'rectangle':\r\n        if (currentPath.length < 2) return null;\r\n        const rectData = {\r\n          x: Math.min(currentPath[0].x, currentPath[1].x) * rect.width,\r\n          y: Math.min(currentPath[0].y, currentPath[1].y) * rect.height,\r\n          width: Math.abs(currentPath[1].x - currentPath[0].x) * rect.width,\r\n          height: Math.abs(currentPath[1].y - currentPath[0].y) * rect.height\r\n        };\r\n        return (\r\n          <rect\r\n            x={rectData.x}\r\n            y={rectData.y}\r\n            width={rectData.width}\r\n            height={rectData.height}\r\n            stroke={color}\r\n            strokeWidth={strokeWidth}\r\n            fill=\"none\"\r\n          />\r\n        );\r\n      \r\n      case 'circle':\r\n        if (currentPath.length < 2) return null;\r\n        const radius = Math.sqrt(\r\n          Math.pow((currentPath[1].x - currentPath[0].x) * rect.width, 2) +\r\n          Math.pow((currentPath[1].y - currentPath[0].y) * rect.height, 2)\r\n        );\r\n        return (\r\n          <circle\r\n            cx={currentPath[0].x * rect.width}\r\n            cy={currentPath[0].y * rect.height}\r\n            r={radius}\r\n            stroke={color}\r\n            strokeWidth={strokeWidth}\r\n            fill=\"none\"\r\n          />\r\n        );\r\n      \r\n      case 'arrow':\r\n        if (currentPath.length < 2) return null;\r\n        const start = currentPath[0];\r\n        const end = currentPath[1];\r\n        const angle = Math.atan2((end.y - start.y) * rect.height, (end.x - start.x) * rect.width);\r\n        const arrowLength = 10;\r\n        const arrowAngle = Math.PI / 6;\r\n        \r\n        return (\r\n          <g>\r\n            <line\r\n              x1={start.x * rect.width}\r\n              y1={start.y * rect.height}\r\n              x2={end.x * rect.width}\r\n              y2={end.y * rect.height}\r\n              stroke={color}\r\n              strokeWidth={strokeWidth}\r\n            />\r\n            <path\r\n              d={`M ${end.x * rect.width} ${end.y * rect.height} \r\n                  L ${end.x * rect.width - arrowLength * Math.cos(angle - arrowAngle)} ${end.y * rect.height - arrowLength * Math.sin(angle - arrowAngle)}\r\n                  M ${end.x * rect.width} ${end.y * rect.height}\r\n                  L ${end.x * rect.width - arrowLength * Math.cos(angle + arrowAngle)} ${end.y * rect.height - arrowLength * Math.sin(angle + arrowAngle)}`}\r\n              stroke={color}\r\n              strokeWidth={strokeWidth}\r\n              fill=\"none\"\r\n            />\r\n          </g>\r\n        );\r\n      \r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  if (!isEnabled) return null;\r\n\r\n  return (\r\n    <>\r\n      {/* Tools Panel */}\r\n      <div className={`fixed left-4 top-1/2 transform -translate-y-1/2 bg-white rounded-lg shadow-lg p-4 z-40 transition-transform ${showTools ? '' : '-translate-x-full'}`}>\r\n        <div className=\"space-y-4\">\r\n          {/* Toggle Button */}\r\n          <div className=\"flex justify-between items-center\">\r\n            <h3 className=\"text-sm font-medium\">Drawing Tools</h3>\r\n            <button\r\n              onClick={() => setShowTools(false)}\r\n              className=\"p-1 hover:bg-gray-100 rounded\"\r\n            >\r\n              <X className=\"h-4 w-4\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Tool Selection */}\r\n          <div className=\"space-y-2\">\r\n            <h4 className=\"text-xs font-medium text-gray-600\">Tools</h4>\r\n            <div className=\"grid grid-cols-2 gap-2\">\r\n              {tools.map((toolItem) => {\r\n                const Icon = toolItem.icon;\r\n                return (\r\n                  <button\r\n                    key={toolItem.id}\r\n                    onClick={() => setTool(toolItem.id)}\r\n                    className={`p-2 rounded border flex items-center justify-center ${\r\n                      tool === toolItem.id\r\n                        ? 'bg-blue-100 border-blue-500 text-blue-700'\r\n                        : 'border-gray-300 hover:bg-gray-50'\r\n                    }`}\r\n                    title={toolItem.name}\r\n                  >\r\n                    <Icon className=\"h-4 w-4\" />\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Color Selection */}\r\n          <div className=\"space-y-2\">\r\n            <h4 className=\"text-xs font-medium text-gray-600\">Color</h4>\r\n            <div className=\"flex flex-wrap gap-1\">\r\n              {colors.map((colorOption) => (\r\n                <button\r\n                  key={colorOption}\r\n                  onClick={() => setColor(colorOption)}\r\n                  className={`w-6 h-6 rounded border-2 ${\r\n                    color === colorOption ? 'border-gray-800' : 'border-gray-300'\r\n                  }`}\r\n                  style={{ backgroundColor: colorOption }}\r\n                />\r\n              ))}\r\n            </div>\r\n            <input\r\n              type=\"color\"\r\n              value={color}\r\n              onChange={(e) => setColor(e.target.value)}\r\n              className=\"w-full h-8 rounded border\"\r\n            />\r\n          </div>\r\n\r\n          {/* Stroke Width */}\r\n          <div className=\"space-y-2\">\r\n            <h4 className=\"text-xs font-medium text-gray-600\">Stroke Width</h4>\r\n            <input\r\n              type=\"range\"\r\n              min=\"1\"\r\n              max=\"10\"\r\n              value={strokeWidth}\r\n              onChange={(e) => setStrokeWidth(parseInt(e.target.value))}\r\n              className=\"w-full\"\r\n            />\r\n            <div className=\"text-xs text-gray-600\">{strokeWidth}px</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Show Tools Button (when hidden) */}\r\n      {!showTools && (\r\n        <button\r\n          onClick={() => setShowTools(true)}\r\n          className=\"fixed left-4 top-1/2 transform -translate-y-1/2 bg-white rounded-lg shadow-lg p-2 z-40\"\r\n          title=\"Show Drawing Tools\"\r\n        >\r\n          <Palette className=\"h-5 w-5\" />\r\n        </button>\r\n      )}\r\n\r\n      {/* Drawing Preview Overlay */}\r\n      {isDrawing && pageContainerRef?.current && (\r\n        <svg\r\n          ref={svgRef}\r\n          className=\"absolute inset-0 pointer-events-none\"\r\n          style={{ \r\n            width: '100%', \r\n            height: '100%', \r\n            zIndex: 30,\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0\r\n          }}\r\n        >\r\n          {renderCurrentDrawing()}\r\n        </svg>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DrawingTools;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AACvE,SAASC,WAAW,EAAEC,cAAc,QAAQ,aAAa;AACzD,SAASC,UAAU,QAAQ,iBAAiB;AAC5C,SAASC,GAAG,EAAEC,UAAU,EAAEC,MAAM,EAAEC,MAAM,EAAEC,KAAK,EAAEC,OAAO,EAAEC,CAAC,QAAQ,cAAc;AACjF,SAASC,EAAE,IAAIC,MAAM,QAAQ,MAAM;AACnC,OAAOC,KAAK,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEpC,MAAMC,YAAY,GAAGA,CAAC;EAAEC,OAAO;EAAEC,UAAU;EAAEC,KAAK;EAAEC,SAAS;EAAEC,eAAe;EAAEC;AAAiB,CAAC,KAAK;EAAAC,EAAA;EACrG,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAG9B,QAAQ,CAAC,UAAU,CAAC;EAC5C,MAAM,CAAC+B,KAAK,EAAEC,QAAQ,CAAC,GAAGhC,QAAQ,CAAC,SAAS,CAAC;EAC7C,MAAM,CAACiC,WAAW,EAAEC,cAAc,CAAC,GAAGlC,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACmC,SAAS,EAAEC,YAAY,CAAC,GAAGpC,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACqC,WAAW,EAAEC,cAAc,CAAC,GAAGtC,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACuC,SAAS,EAAEC,YAAY,CAAC,GAAGxC,QAAQ,CAAC,IAAI,CAAC;EAEhD,MAAMyC,MAAM,GAAGxC,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAMyC,WAAW,GAAGrC,cAAc,CAAC,CAAC;EAEpC,MAAMsC,qBAAqB,GAAGvC,WAAW,CAACE,UAAU,CAACsC,MAAM,EAAE;IAC3DC,SAAS,EAAEA,CAAA,KAAM;MACfH,WAAW,CAACI,iBAAiB,CAAC,CAAC,UAAU,EAAExB,OAAO,CAAC,CAAC;MACpDN,KAAK,CAAC+B,OAAO,CAAC,gBAAgB,CAAC;IACjC,CAAC;IACDC,OAAO,EAAGC,KAAK,IAAK;MAClBjC,KAAK,CAACiC,KAAK,CAAC,wBAAwB,CAAC;MACrCC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IACjD;EACF,CAAC,CAAC;EAEF,MAAME,KAAK,GAAG,CACZ;IAAEC,EAAE,EAAE,UAAU;IAAEC,IAAI,EAAE9C,GAAG;IAAE+C,IAAI,EAAE;EAAW,CAAC,EAC/C;IAAEF,EAAE,EAAE,OAAO;IAAEC,IAAI,EAAE7C,UAAU;IAAE8C,IAAI,EAAE;EAAQ,CAAC,EAChD;IAAEF,EAAE,EAAE,WAAW;IAAEC,IAAI,EAAE5C,MAAM;IAAE6C,IAAI,EAAE;EAAY,CAAC,EACpD;IAAEF,EAAE,EAAE,QAAQ;IAAEC,IAAI,EAAE3C,MAAM;IAAE4C,IAAI,EAAE;EAAS,CAAC,EAC9C;IAAEF,EAAE,EAAE,MAAM;IAAEC,IAAI,EAAE1C,KAAK;IAAE2C,IAAI,EAAE;EAAO,CAAC,CAC1C;EAED,MAAMC,MAAM,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;EAE5F,MAAMC,mBAAmB,GAAGrD,WAAW,CAAEsD,CAAC,IAAK;IAC7C,IAAI,EAAC9B,gBAAgB,aAAhBA,gBAAgB,eAAhBA,gBAAgB,CAAE+B,OAAO,GAAE,OAAO;MAAEC,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC;IAErD,MAAMC,aAAa,GAAGlC,gBAAgB,CAAC+B,OAAO;IAC9C,MAAMI,MAAM,GAAGD,aAAa,CAACE,aAAa,CAAC,QAAQ,CAAC;IACpD,IAAI,CAACD,MAAM,EAAE,OAAO;MAAEH,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC;IAElC,MAAMI,IAAI,GAAGF,MAAM,CAACG,qBAAqB,CAAC,CAAC;IAC3C,OAAO;MACLN,CAAC,EAAE,CAACF,CAAC,CAACS,OAAO,GAAGF,IAAI,CAACG,IAAI,IAAIH,IAAI,CAACI,KAAK;MACvCR,CAAC,EAAE,CAACH,CAAC,CAACY,OAAO,GAAGL,IAAI,CAACM,GAAG,IAAIN,IAAI,CAACO;IACnC,CAAC;EACH,CAAC,EAAE,CAAC5C,gBAAgB,CAAC,CAAC;EAEtB,MAAM6C,eAAe,GAAGrE,WAAW,CAAEsD,CAAC,IAAK;IACzC,IAAI,CAAChC,SAAS,EAAE;IAChBgC,CAAC,CAACgB,cAAc,CAAC,CAAC;IAElBrC,YAAY,CAAC,IAAI,CAAC;IAClB,MAAMsC,GAAG,GAAGlB,mBAAmB,CAACC,CAAC,CAAC;IAClCnB,cAAc,CAAC,CAACoC,GAAG,CAAC,CAAC;EACvB,CAAC,EAAE,CAACjD,SAAS,EAAE+B,mBAAmB,CAAC,CAAC;EAEpC,MAAMmB,eAAe,GAAGxE,WAAW,CAAEsD,CAAC,IAAK;IACzC,IAAI,CAACtB,SAAS,IAAI,CAACV,SAAS,EAAE;IAC9BgC,CAAC,CAACgB,cAAc,CAAC,CAAC;IAElB,MAAMC,GAAG,GAAGlB,mBAAmB,CAACC,CAAC,CAAC;IAElC,IAAI5B,IAAI,KAAK,UAAU,EAAE;MACvBS,cAAc,CAACsC,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEF,GAAG,CAAC,CAAC;IACxC,CAAC,MAAM;MACLpC,cAAc,CAACsC,IAAI,IAAI,CAACA,IAAI,CAAC,CAAC,CAAC,EAAEF,GAAG,CAAC,CAAC;IACxC;EACF,CAAC,EAAE,CAACvC,SAAS,EAAEV,SAAS,EAAEI,IAAI,EAAE2B,mBAAmB,CAAC,CAAC;EAErD,MAAMqB,aAAa,GAAG1E,WAAW,CAAC,MAAOsD,CAAC,IAAK;IAC7C,IAAI,CAACtB,SAAS,IAAIE,WAAW,CAACyC,MAAM,KAAK,CAAC,EAAE;IAC5CrB,CAAC,CAACgB,cAAc,CAAC,CAAC;IAElB,MAAMM,WAAW,GAAG;MAClBC,IAAI,EAAEjE,MAAM,CAAC,CAAC;MACdO,OAAO;MACPC,UAAU;MACV0D,IAAI,EAAEpD,IAAI;MACVqD,IAAI,EAAE;QACJC,IAAI,EAAE9C,WAAW;QACjBb;MACF,CAAC;MACD4D,KAAK,EAAE;QACLrD,KAAK;QACLE,WAAW;QACXoD,OAAO,EAAE;MACX;IACF,CAAC;IAED,IAAI;MACF,MAAM1C,qBAAqB,CAAC2C,WAAW,CAACP,WAAW,CAAC;MACpDrD,eAAe,IAAIA,eAAe,CAACqD,WAAW,CAAC;IACjD,CAAC,CAAC,OAAO9B,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IACjD;IAEAb,YAAY,CAAC,KAAK,CAAC;IACnBE,cAAc,CAAC,EAAE,CAAC;EACpB,CAAC,EAAE,CAACH,SAAS,EAAEE,WAAW,EAAER,IAAI,EAAEP,OAAO,EAAEC,UAAU,EAAEC,KAAK,EAAEO,KAAK,EAAEE,WAAW,EAAEU,qBAAqB,EAAEjB,eAAe,CAAC,CAAC;;EAE1H;EACAxB,SAAS,CAAC,MAAM;IACd,IAAI,CAACuB,SAAS,IAAI,EAACE,gBAAgB,aAAhBA,gBAAgB,eAAhBA,gBAAgB,CAAE+B,OAAO,GAAE;IAE9C,MAAMG,aAAa,GAAGlC,gBAAgB,CAAC+B,OAAO;IAC9C,MAAMI,MAAM,GAAGD,aAAa,CAACE,aAAa,CAAC,QAAQ,CAAC;IACpD,IAAI,CAACD,MAAM,EAAE;IAEbA,MAAM,CAACyB,gBAAgB,CAAC,WAAW,EAAEf,eAAe,CAAC;IACrDV,MAAM,CAACyB,gBAAgB,CAAC,WAAW,EAAEZ,eAAe,CAAC;IACrDb,MAAM,CAACyB,gBAAgB,CAAC,SAAS,EAAEV,aAAa,CAAC;IACjDf,MAAM,CAACsB,KAAK,CAACI,MAAM,GAAG,WAAW;IAEjC,OAAO,MAAM;MACX1B,MAAM,CAAC2B,mBAAmB,CAAC,WAAW,EAAEjB,eAAe,CAAC;MACxDV,MAAM,CAAC2B,mBAAmB,CAAC,WAAW,EAAEd,eAAe,CAAC;MACxDb,MAAM,CAAC2B,mBAAmB,CAAC,SAAS,EAAEZ,aAAa,CAAC;MACpDf,MAAM,CAACsB,KAAK,CAACI,MAAM,GAAG,SAAS;IACjC,CAAC;EACH,CAAC,EAAE,CAAC/D,SAAS,EAAE+C,eAAe,EAAEG,eAAe,EAAEE,aAAa,EAAElD,gBAAgB,CAAC,CAAC;EAElF,MAAM+D,oBAAoB,GAAGA,CAAA,KAAM;IACjC,IAAIrD,WAAW,CAACyC,MAAM,KAAK,CAAC,IAAI,EAACnD,gBAAgB,aAAhBA,gBAAgB,eAAhBA,gBAAgB,CAAE+B,OAAO,GAAE,OAAO,IAAI;IAEvE,MAAMG,aAAa,GAAGlC,gBAAgB,CAAC+B,OAAO;IAC9C,MAAMI,MAAM,GAAGD,aAAa,CAACE,aAAa,CAAC,QAAQ,CAAC;IACpD,IAAI,CAACD,MAAM,EAAE,OAAO,IAAI;IAExB,MAAME,IAAI,GAAGF,MAAM,CAACG,qBAAqB,CAAC,CAAC;IAE3C,QAAQpC,IAAI;MACV,KAAK,UAAU;QACb,IAAIQ,WAAW,CAACyC,MAAM,GAAG,CAAC,EAAE,OAAO,IAAI;QACvC,MAAMa,QAAQ,GAAG,KAAKtD,WAAW,CAAC,CAAC,CAAC,CAACsB,CAAC,GAAGK,IAAI,CAACI,KAAK,IAAI/B,WAAW,CAAC,CAAC,CAAC,CAACuB,CAAC,GAAGI,IAAI,CAACO,MAAM,GAAG,GACtFlC,WAAW,CAACuD,KAAK,CAAC,CAAC,CAAC,CAACC,GAAG,CAACC,CAAC,IAAI,KAAKA,CAAC,CAACnC,CAAC,GAAGK,IAAI,CAACI,KAAK,IAAI0B,CAAC,CAAClC,CAAC,GAAGI,IAAI,CAACO,MAAM,EAAE,CAAC,CAACwB,IAAI,CAAC,GAAG,CAAC;QACvF,oBACE7E,OAAA;UACE8E,CAAC,EAAEL,QAAS;UACZM,MAAM,EAAElE,KAAM;UACdE,WAAW,EAAEA,WAAY;UACzBiE,IAAI,EAAC,MAAM;UACXC,aAAa,EAAC,OAAO;UACrBC,cAAc,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvB,CAAC;MAGN,KAAK,MAAM;QACT,IAAInE,WAAW,CAACyC,MAAM,GAAG,CAAC,EAAE,OAAO,IAAI;QACvC,oBACE5D,OAAA;UACEuF,EAAE,EAAEpE,WAAW,CAAC,CAAC,CAAC,CAACsB,CAAC,GAAGK,IAAI,CAACI,KAAM;UAClCsC,EAAE,EAAErE,WAAW,CAAC,CAAC,CAAC,CAACuB,CAAC,GAAGI,IAAI,CAACO,MAAO;UACnCoC,EAAE,EAAEtE,WAAW,CAAC,CAAC,CAAC,CAACsB,CAAC,GAAGK,IAAI,CAACI,KAAM;UAClCwC,EAAE,EAAEvE,WAAW,CAAC,CAAC,CAAC,CAACuB,CAAC,GAAGI,IAAI,CAACO,MAAO;UACnC0B,MAAM,EAAElE,KAAM;UACdE,WAAW,EAAEA;QAAY;UAAAoE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC;MAGN,KAAK,WAAW;QACd,IAAInE,WAAW,CAACyC,MAAM,GAAG,CAAC,EAAE,OAAO,IAAI;QACvC,MAAM+B,QAAQ,GAAG;UACflD,CAAC,EAAEmD,IAAI,CAACC,GAAG,CAAC1E,WAAW,CAAC,CAAC,CAAC,CAACsB,CAAC,EAAEtB,WAAW,CAAC,CAAC,CAAC,CAACsB,CAAC,CAAC,GAAGK,IAAI,CAACI,KAAK;UAC5DR,CAAC,EAAEkD,IAAI,CAACC,GAAG,CAAC1E,WAAW,CAAC,CAAC,CAAC,CAACuB,CAAC,EAAEvB,WAAW,CAAC,CAAC,CAAC,CAACuB,CAAC,CAAC,GAAGI,IAAI,CAACO,MAAM;UAC7DH,KAAK,EAAE0C,IAAI,CAACE,GAAG,CAAC3E,WAAW,CAAC,CAAC,CAAC,CAACsB,CAAC,GAAGtB,WAAW,CAAC,CAAC,CAAC,CAACsB,CAAC,CAAC,GAAGK,IAAI,CAACI,KAAK;UACjEG,MAAM,EAAEuC,IAAI,CAACE,GAAG,CAAC3E,WAAW,CAAC,CAAC,CAAC,CAACuB,CAAC,GAAGvB,WAAW,CAAC,CAAC,CAAC,CAACuB,CAAC,CAAC,GAAGI,IAAI,CAACO;QAC/D,CAAC;QACD,oBACErD,OAAA;UACEyC,CAAC,EAAEkD,QAAQ,CAAClD,CAAE;UACdC,CAAC,EAAEiD,QAAQ,CAACjD,CAAE;UACdQ,KAAK,EAAEyC,QAAQ,CAACzC,KAAM;UACtBG,MAAM,EAAEsC,QAAQ,CAACtC,MAAO;UACxB0B,MAAM,EAAElE,KAAM;UACdE,WAAW,EAAEA,WAAY;UACzBiE,IAAI,EAAC;QAAM;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACZ,CAAC;MAGN,KAAK,QAAQ;QACX,IAAInE,WAAW,CAACyC,MAAM,GAAG,CAAC,EAAE,OAAO,IAAI;QACvC,MAAMmC,MAAM,GAAGH,IAAI,CAACI,IAAI,CACtBJ,IAAI,CAACK,GAAG,CAAC,CAAC9E,WAAW,CAAC,CAAC,CAAC,CAACsB,CAAC,GAAGtB,WAAW,CAAC,CAAC,CAAC,CAACsB,CAAC,IAAIK,IAAI,CAACI,KAAK,EAAE,CAAC,CAAC,GAC/D0C,IAAI,CAACK,GAAG,CAAC,CAAC9E,WAAW,CAAC,CAAC,CAAC,CAACuB,CAAC,GAAGvB,WAAW,CAAC,CAAC,CAAC,CAACuB,CAAC,IAAII,IAAI,CAACO,MAAM,EAAE,CAAC,CACjE,CAAC;QACD,oBACErD,OAAA;UACEkG,EAAE,EAAE/E,WAAW,CAAC,CAAC,CAAC,CAACsB,CAAC,GAAGK,IAAI,CAACI,KAAM;UAClCiD,EAAE,EAAEhF,WAAW,CAAC,CAAC,CAAC,CAACuB,CAAC,GAAGI,IAAI,CAACO,MAAO;UACnC+C,CAAC,EAAEL,MAAO;UACVhB,MAAM,EAAElE,KAAM;UACdE,WAAW,EAAEA,WAAY;UACzBiE,IAAI,EAAC;QAAM;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACZ,CAAC;MAGN,KAAK,OAAO;QACV,IAAInE,WAAW,CAACyC,MAAM,GAAG,CAAC,EAAE,OAAO,IAAI;QACvC,MAAMyC,KAAK,GAAGlF,WAAW,CAAC,CAAC,CAAC;QAC5B,MAAMmF,GAAG,GAAGnF,WAAW,CAAC,CAAC,CAAC;QAC1B,MAAMoF,KAAK,GAAGX,IAAI,CAACY,KAAK,CAAC,CAACF,GAAG,CAAC5D,CAAC,GAAG2D,KAAK,CAAC3D,CAAC,IAAII,IAAI,CAACO,MAAM,EAAE,CAACiD,GAAG,CAAC7D,CAAC,GAAG4D,KAAK,CAAC5D,CAAC,IAAIK,IAAI,CAACI,KAAK,CAAC;QACzF,MAAMuD,WAAW,GAAG,EAAE;QACtB,MAAMC,UAAU,GAAGd,IAAI,CAACe,EAAE,GAAG,CAAC;QAE9B,oBACE3G,OAAA;UAAA4G,QAAA,gBACE5G,OAAA;YACEuF,EAAE,EAAEc,KAAK,CAAC5D,CAAC,GAAGK,IAAI,CAACI,KAAM;YACzBsC,EAAE,EAAEa,KAAK,CAAC3D,CAAC,GAAGI,IAAI,CAACO,MAAO;YAC1BoC,EAAE,EAAEa,GAAG,CAAC7D,CAAC,GAAGK,IAAI,CAACI,KAAM;YACvBwC,EAAE,EAAEY,GAAG,CAAC5D,CAAC,GAAGI,IAAI,CAACO,MAAO;YACxB0B,MAAM,EAAElE,KAAM;YACdE,WAAW,EAAEA;UAAY;YAAAoE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1B,CAAC,eACFtF,OAAA;YACE8E,CAAC,EAAE,KAAKwB,GAAG,CAAC7D,CAAC,GAAGK,IAAI,CAACI,KAAK,IAAIoD,GAAG,CAAC5D,CAAC,GAAGI,IAAI,CAACO,MAAM;AAC/D,sBAAsBiD,GAAG,CAAC7D,CAAC,GAAGK,IAAI,CAACI,KAAK,GAAGuD,WAAW,GAAGb,IAAI,CAACiB,GAAG,CAACN,KAAK,GAAGG,UAAU,CAAC,IAAIJ,GAAG,CAAC5D,CAAC,GAAGI,IAAI,CAACO,MAAM,GAAGoD,WAAW,GAAGb,IAAI,CAACkB,GAAG,CAACP,KAAK,GAAGG,UAAU,CAAC;AACzJ,sBAAsBJ,GAAG,CAAC7D,CAAC,GAAGK,IAAI,CAACI,KAAK,IAAIoD,GAAG,CAAC5D,CAAC,GAAGI,IAAI,CAACO,MAAM;AAC/D,sBAAsBiD,GAAG,CAAC7D,CAAC,GAAGK,IAAI,CAACI,KAAK,GAAGuD,WAAW,GAAGb,IAAI,CAACiB,GAAG,CAACN,KAAK,GAAGG,UAAU,CAAC,IAAIJ,GAAG,CAAC5D,CAAC,GAAGI,IAAI,CAACO,MAAM,GAAGoD,WAAW,GAAGb,IAAI,CAACkB,GAAG,CAACP,KAAK,GAAGG,UAAU,CAAC,EAAG;YAC9I3B,MAAM,EAAElE,KAAM;YACdE,WAAW,EAAEA,WAAY;YACzBiE,IAAI,EAAC;UAAM;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACZ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC;MAGR;QACE,OAAO,IAAI;IACf;EACF,CAAC;EAED,IAAI,CAAC/E,SAAS,EAAE,OAAO,IAAI;EAE3B,oBACEP,OAAA,CAAAE,SAAA;IAAA0G,QAAA,gBAEE5G,OAAA;MAAK+G,SAAS,EAAE,+GAA+G1F,SAAS,GAAG,EAAE,GAAG,mBAAmB,EAAG;MAAAuF,QAAA,eACpK5G,OAAA;QAAK+G,SAAS,EAAC,WAAW;QAAAH,QAAA,gBAExB5G,OAAA;UAAK+G,SAAS,EAAC,mCAAmC;UAAAH,QAAA,gBAChD5G,OAAA;YAAI+G,SAAS,EAAC,qBAAqB;YAAAH,QAAA,EAAC;UAAa;YAAAzB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACtDtF,OAAA;YACEgH,OAAO,EAAEA,CAAA,KAAM1F,YAAY,CAAC,KAAK,CAAE;YACnCyF,SAAS,EAAC,+BAA+B;YAAAH,QAAA,eAEzC5G,OAAA,CAACL,CAAC;cAACoH,SAAS,EAAC;YAAS;cAAA5B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eAGNtF,OAAA;UAAK+G,SAAS,EAAC,WAAW;UAAAH,QAAA,gBACxB5G,OAAA;YAAI+G,SAAS,EAAC,mCAAmC;YAAAH,QAAA,EAAC;UAAK;YAAAzB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC5DtF,OAAA;YAAK+G,SAAS,EAAC,wBAAwB;YAAAH,QAAA,EACpC3E,KAAK,CAAC0C,GAAG,CAAEsC,QAAQ,IAAK;cACvB,MAAMC,IAAI,GAAGD,QAAQ,CAAC9E,IAAI;cAC1B,oBACEnC,OAAA;gBAEEgH,OAAO,EAAEA,CAAA,KAAMpG,OAAO,CAACqG,QAAQ,CAAC/E,EAAE,CAAE;gBACpC6E,SAAS,EAAE,uDACTpG,IAAI,KAAKsG,QAAQ,CAAC/E,EAAE,GAChB,2CAA2C,GAC3C,kCAAkC,EACrC;gBACHiF,KAAK,EAAEF,QAAQ,CAAC7E,IAAK;gBAAAwE,QAAA,eAErB5G,OAAA,CAACkH,IAAI;kBAACH,SAAS,EAAC;gBAAS;kBAAA5B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC,GATvB2B,QAAQ,CAAC/E,EAAE;gBAAAiD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAUV,CAAC;YAEb,CAAC;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAGNtF,OAAA;UAAK+G,SAAS,EAAC,WAAW;UAAAH,QAAA,gBACxB5G,OAAA;YAAI+G,SAAS,EAAC,mCAAmC;YAAAH,QAAA,EAAC;UAAK;YAAAzB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC5DtF,OAAA;YAAK+G,SAAS,EAAC,sBAAsB;YAAAH,QAAA,EAClCvE,MAAM,CAACsC,GAAG,CAAEyC,WAAW,iBACtBpH,OAAA;cAEEgH,OAAO,EAAEA,CAAA,KAAMlG,QAAQ,CAACsG,WAAW,CAAE;cACrCL,SAAS,EAAE,4BACTlG,KAAK,KAAKuG,WAAW,GAAG,iBAAiB,GAAG,iBAAiB,EAC5D;cACHlD,KAAK,EAAE;gBAAEmD,eAAe,EAAED;cAAY;YAAE,GALnCA,WAAW;cAAAjC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAMjB,CACF;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eACNtF,OAAA;YACE+D,IAAI,EAAC,OAAO;YACZuD,KAAK,EAAEzG,KAAM;YACb0G,QAAQ,EAAGhF,CAAC,IAAKzB,QAAQ,CAACyB,CAAC,CAACiF,MAAM,CAACF,KAAK,CAAE;YAC1CP,SAAS,EAAC;UAA2B;YAAA5B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAGNtF,OAAA;UAAK+G,SAAS,EAAC,WAAW;UAAAH,QAAA,gBACxB5G,OAAA;YAAI+G,SAAS,EAAC,mCAAmC;YAAAH,QAAA,EAAC;UAAY;YAAAzB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACnEtF,OAAA;YACE+D,IAAI,EAAC,OAAO;YACZ8B,GAAG,EAAC,GAAG;YACP4B,GAAG,EAAC,IAAI;YACRH,KAAK,EAAEvG,WAAY;YACnBwG,QAAQ,EAAGhF,CAAC,IAAKvB,cAAc,CAAC0G,QAAQ,CAACnF,CAAC,CAACiF,MAAM,CAACF,KAAK,CAAC,CAAE;YAC1DP,SAAS,EAAC;UAAQ;YAAA5B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnB,CAAC,eACFtF,OAAA;YAAK+G,SAAS,EAAC,uBAAuB;YAAAH,QAAA,GAAE7F,WAAW,EAAC,IAAE;UAAA;YAAAoE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAGL,CAACjE,SAAS,iBACTrB,OAAA;MACEgH,OAAO,EAAEA,CAAA,KAAM1F,YAAY,CAAC,IAAI,CAAE;MAClCyF,SAAS,EAAC,wFAAwF;MAClGI,KAAK,EAAC,oBAAoB;MAAAP,QAAA,eAE1B5G,OAAA,CAACN,OAAO;QAACqH,SAAS,EAAC;MAAS;QAAA5B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzB,CACT,EAGArE,SAAS,KAAIR,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAE+B,OAAO,kBACrCxC,OAAA;MACE2H,GAAG,EAAEpG,MAAO;MACZwF,SAAS,EAAC,sCAAsC;MAChD7C,KAAK,EAAE;QACLhB,KAAK,EAAE,MAAM;QACbG,MAAM,EAAE,MAAM;QACduE,MAAM,EAAE,EAAE;QACVC,QAAQ,EAAE,UAAU;QACpBzE,GAAG,EAAE,CAAC;QACNH,IAAI,EAAE;MACR,CAAE;MAAA2D,QAAA,EAEDpC,oBAAoB,CAAC;IAAC;MAAAW,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpB,CACN;EAAA,eACD,CAAC;AAEP,CAAC;AAAC5E,EAAA,CArVIP,YAAY;EAAA,QASIhB,cAAc,EAEJD,WAAW;AAAA;AAAA4I,EAAA,GAXrC3H,YAAY;AAuVlB,eAAeA,YAAY;AAAC,IAAA2H,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}